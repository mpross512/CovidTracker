<!DOCTYPE html>
<html>
    <head>
        <title>Covid Tracker</title>
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.gstatic.com"> 
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>

        <div id="navbar">
            <a href="index.html">COVID HEAT MAP</a>
            <a href="about.html" style="float:right;">ABOUT</a>
        </div>


        <div id="searchbar">
            <input id="searchbox" type="text" placeholder="tx">
        </div>


        <div id="map">
            <div id="infobox">


            </div>
            <div style="text-align: center;">
                <img src="US_Map.png" alt="map">
            </div>

        </div>


        <div id="graph">
            <h1>GRAPH</h1>
            <img src="trendline.png" alt="graph">
        </div>

    </body>

    <script>

        $(function(){

            populateData("tx");
        
        });

        function populateData(state) {
            fetch(`https://api.covidtracking.com/v1/states/${state}/current.json`)
                .then(function (response) {
                    return response.json();
                })
                .then(function (data) {
                    $("#infobox").empty();
                    $("#infobox").append(`<h1>${data.state}</h1>`)
                    $("#infobox").append(`<h3>Cases: ${data.positive}</h3>`)
                    $("#infobox").append(`<h3>Recovered: ${data.recovered}</h3>`) 
                    $("#infobox").append(`<h3>Deaths: ${data.death}</h3>`)
                })
                .catch(error => console.log('error', error));
        }

        $("#searchbox").keydown(function (e) {
            if(e.key === 'Enter') {
                populateData($("#searchbox").val());
                $("#searchbox").val("");
                return false;
            }
        });

    </script>
</html>